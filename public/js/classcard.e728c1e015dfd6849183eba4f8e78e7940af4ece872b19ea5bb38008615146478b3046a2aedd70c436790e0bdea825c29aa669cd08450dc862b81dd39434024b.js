(()=>{var T=Object.defineProperty;var x=(r,e,t)=>e in r?T(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var i=(r,e,t)=>x(r,typeof e!="symbol"?e+"":e,t);function C(r,e,t,s,n,a){r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+s-a,t),r.quadraticCurveTo(e+s,t,e+s,t+a),r.lineTo(e+s,t+n-a),r.quadraticCurveTo(e+s,t+n,e+s-a,t+n),r.lineTo(e+a,t+n),r.quadraticCurveTo(e,t+n,e,t+n-a),r.lineTo(e,t+a),r.quadraticCurveTo(e,t,e+a,t),r.closePath()}var f=class{constructor(e,t,s,n,a){i(this,"x");i(this,"y");i(this,"width");i(this,"height");i(this,"title");i(this,"properties");i(this,"methods");i(this,"isSelected",!1);i(this,"isActive",!1);i(this,"animationTime",0);i(this,"pulseScale",1);i(this,"fadeIn",0);this.x=e,this.y=t,this.width=280,this.height=180,this.title=s,this.properties=n,this.methods=a,this.fadeIn=0}update(){this.isActive&&(this.animationTime+=.016,this.pulseScale=1+Math.sin(this.animationTime*3)*.02,this.fadeIn<1&&(this.fadeIn+=.05))}draw(e){!this.isActive||this.fadeIn<=0||(e.save(),e.textAlign="left",e.globalAlpha=this.fadeIn,e.translate(this.x,this.y),e.scale(this.pulseScale,this.pulseScale),e.fillStyle=this.isSelected?"#3b82f6":"#ffffff",e.strokeStyle=this.isSelected?"#1d4ed8":"#d1d5db",e.lineWidth=this.isSelected?3:2,C(e,0,0,this.width,this.height,12),e.fill(),e.stroke(),e.fillStyle=this.isSelected?"#ffffff":"#111827",e.font="bold 16px system-ui",e.fillText(`Class: ${this.title}`,15,25),e.fillStyle=this.isSelected?"#e0e7ff":"#f3f4f6",e.fillRect(10,35,this.width-20,60),e.fillStyle=this.isSelected?"#ffffff":"#374151",e.font="bold 12px system-ui",e.fillText("Properties:",15,50),this.properties.forEach((t,s)=>{e.fillStyle=this.isSelected?"#ffffff":"#4b5563",e.font="11px monospace",e.fillText(t,20,65+s*15)}),e.fillStyle=this.isSelected?"#e0e7ff":"#f3f4f6",e.fillRect(10,105,this.width-20,60),e.fillStyle=this.isSelected?"#ffffff":"#374151",e.font="bold 12px system-ui",e.fillText("Methods:",15,120),this.methods.forEach((t,s)=>{e.fillStyle=this.isSelected?"#ffffff":"#4b5563",e.font="11px monospace",e.fillText(t,20,135+s*15)}),e.restore())}containsPoint(e,t){let s=this.pulseScale||1;return e>=this.x&&e<=this.x+this.width*s&&t>=this.y&&t<=this.y+this.height*s}},l=class{constructor(e,t,s,n){i(this,"x");i(this,"y");i(this,"width");i(this,"height");i(this,"name");i(this,"requirements");i(this,"isSelected",!1);i(this,"isVisible",!1);i(this,"animationTime",0);i(this,"glowIntensity",0);i(this,"fadeIn",0);i(this,"slideIn",0);this.x=e,this.y=t,this.width=200,this.height=120,this.name=s,this.requirements=n,this.fadeIn=0,this.slideIn=0}update(){this.animationTime+=.016,this.glowIntensity=Math.sin(this.animationTime*2)*.5+.5,this.isVisible&&this.fadeIn<1&&(this.fadeIn+=.08),this.isVisible&&this.slideIn<1&&(this.slideIn+=.1)}draw(e){!this.isVisible||this.fadeIn<=0||(e.save(),e.textAlign="left",e.globalAlpha=this.fadeIn,e.translate(this.x+(1-this.slideIn)*50,this.y),this.isSelected&&(e.shadowColor="#8b5cf6",e.shadowBlur=20*this.glowIntensity),e.fillStyle=this.isSelected?"#8b5cf6":"#f3f4f6",e.strokeStyle=this.isSelected?"#7c3aed":"#d1d5db",e.lineWidth=this.isSelected?3:2,C(e,0,0,this.width,this.height,12),e.fill(),e.stroke(),e.fillStyle=this.isSelected?"#ffffff":"#111827",e.font="bold 14px system-ui",e.fillText(`Interface: ${this.name}`,15,20),e.fillStyle=this.isSelected?"#ffffff":"#374151",e.font="bold 11px system-ui",e.fillText("Must have:",15,40),this.requirements.forEach((t,s)=>{e.fillStyle=this.isSelected?"#e0e7ff":"#4b5563",e.font="10px monospace",e.fillText(t,20,55+s*15)}),e.restore())}containsPoint(e,t){if(!this.isVisible)return!1;let s=(1-this.slideIn)*50,n=this.x+s,a=n+this.width,o=this.y,h=o+this.height;return e>=n&&e<=a&&t>=o&&t<=h}},S=class{constructor(){i(this,"cards",[]);i(this,"interfaces",[]);i(this,"currentClassIndex",0);i(this,"selectedCard",null);i(this,"score",0);i(this,"level",1);i(this,"gamePhase","tutorial");i(this,"messages",[]);i(this,"messageTimer",0);i(this,"correctInterfaces",[]);i(this,"canvasWidth",800);i(this,"canvasHeight",600);i(this,"wrongAttempts",0);i(this,"correctIndexInTrio",[1,0,2,2,1]);this.initializeGame()}setCanvasSize(e,t){this.canvasWidth=e,this.canvasHeight=t}initializeGame(){this.cards=[new f(0,100,"Dog",["string Name","int Age","string Breed"],["Bark()","Fetch()","Sleep()"]),new f(0,100,"Car",["string Model","int Year","string Color"],["Start()","Stop()","Drive()"]),new f(0,100,"Book",["string Title","string Author","int Pages"],["Read()","Close()","Bookmark()"]),new f(0,100,"Person",["string Name","int Age","string Email"],["Work()","Eat()","Sleep()"]),new f(0,100,"Computer",["string Brand","int RAM","string OS"],["TurnOn()","TurnOff()","Process()"])],this.interfaces=[new l(50,350,"IVehicle",["Model","Year","Start","Stop"]),new l(300,350,"IPet",["Name","Age","Fetch"]),new l(550,350,"IReadable",["Title","Read"]),new l(50,350,"IVehicle",["Model","Year","Start","Stop"]),new l(300,350,"IAnimal",["Name","Age","Bark"]),new l(550,350,"IReadable",["Title","Read"]),new l(50,350,"IPet",["Name","Age","Fetch"]),new l(300,350,"IVehicle",["Model","Drive"]),new l(550,350,"IReadable",["Title","Author","Read"]),new l(50,350,"IDevice",["Brand","TurnOn","TurnOff"]),new l(300,350,"IWorker",["Name","Work"]),new l(550,350,"ILiving",["Age","Eat","Sleep"]),new l(50,350,"IVehicle",["Model","Drive"]),new l(300,350,"IDevice",["Brand","TurnOn","TurnOff"]),new l(550,350,"IAnimal",["Name","Age","Bark"])],this.messages=["Welcome to C# Class Builder! \u{1F3AE}","Click on the class card to start","Then choose the 1 interface it implements correctly"],this.showCurrentClass()}showCurrentClass(){(this.canvasWidth<=0||this.canvasHeight<=0)&&(this.canvasWidth=800,this.canvasHeight=600),this.wrongAttempts=0,this.cards.forEach((t,s)=>{t.isActive=s===this.currentClassIndex,t.fadeIn=(s===this.currentClassIndex,0)});let e=this.cards[this.currentClassIndex];e&&(e.x=Math.max(20,(this.canvasWidth-e.width)/2),e.y=100,e.isActive=!0,e.fadeIn=0),this.interfaces.forEach(t=>{t.isVisible=!1,t.fadeIn=0,t.slideIn=0}),this.setCorrectInterfaces()}setCorrectInterfaces(){let t=this.currentClassIndex*3;(this.canvasWidth<=0||this.canvasHeight<=0)&&(this.canvasWidth=800,this.canvasHeight=800);let s=3,a=(typeof window!="undefined"&&window.innerWidth?window.innerWidth:this.canvasWidth)<700?1:3,o=Math.ceil(s/a);for(let h=0;h<3;h++){let c=this.interfaces[t+h];if(c){c.isVisible=!0;let d=20,m=200,w=a===1?0:h%a,I=a===1?h:Math.floor(h/a),g;if(a===1)g=Math.max(d,(this.canvasWidth-m)/2);else{let v=Math.max(0,this.canvasWidth-d*2-m*a),y=Math.max(10,v/(a+1));g=d+y*(w+1)+m*w}let u;if(a===1){let v=o*c.height+(o-1)*20;u=Math.max(300,(this.canvasHeight-v)/2)+I*(c.height+20)}else u=Math.max(300,this.canvasHeight-200);c.x=g,c.y=u,c.fadeIn=0,c.slideIn=0}}}update(){this.cards.forEach(e=>e.update()),this.interfaces.forEach(e=>e.update()),this.messageTimer>0&&(this.messageTimer-=.016)}handleClick(e,t){if(this.gamePhase==="complete"){this.restartGame();return}for(let s of this.interfaces)if(s.containsPoint(e,t)){this.selectInterface(s);return}for(let s of this.cards)if(s.containsPoint(e,t)&&s.isActive){this.selectClass(s);return}this.clearSelection()}restartGame(){this.currentClassIndex=0,this.score=0,this.level=1,this.gamePhase="tutorial",this.selectedCard=null,this.wrongAttempts=0,this.clearSelection(),this.showCurrentClass(),this.showMessage("Game restarted! Click on the class to begin.")}selectClass(e){this.clearSelection(),e.isSelected=!0,this.selectedCard=e,this.showMessage(`Selected: ${e.title}. Now choose 1 interface it implements!`)}selectInterface(e){if(!this.selectedCard)return;e.isSelected=!e.isSelected;let t=this.interfaces.filter(s=>s.isSelected).length;t===1?this.checkInterfaceSelection():t>1?(e.isSelected=!1,this.showMessage("\u274C You can only select 1 interface.")):this.showMessage(`Selected ${t}/1 interface. Select 1.`)}checkInterfaceSelection(){let e=this.interfaces.filter(o=>o.isSelected),t=this.currentClassIndex,s=t*3,n=this.interfaces[s+this.correctIndexInTrio[t]];if(e.length!==1){this.showMessage("\u274C Please select exactly 1 interface!");return}if(e[0]===n){let o=this.wrongAttempts,h=o===0?100:o===1?50:0;this.score+=h;let c=h>0?` (+${h})`:" (+0)";this.showMessage(`\u2705 Correct! ${this.selectedCard.title} implements that interface.${c}`),this.level++,this.nextClass()}else this.wrongAttempts=Math.min(2,this.wrongAttempts+1),this.showMessage(`\u274C Not quite right. ${this.wrongAttempts===1?"One more try for 50 points.":"Further tries give 0 points."}`),this.clearInterfaceSelection()}clearInterfaceSelection(){this.interfaces.forEach(e=>e.isSelected=!1)}nextClass(){this.currentClassIndex++,this.currentClassIndex>=this.cards.length?(this.gamePhase="complete",this.showMessage("\u{1F389} Congratulations! You have mastered all C# classes!"),this.cards.forEach(e=>e.isActive=!1),this.interfaces.forEach(e=>e.isVisible=!1)):(this.clearSelection(),this.showCurrentClass(),this.showMessage(`Great! Now let's work with: ${this.cards[this.currentClassIndex].title}`))}clearSelection(){this.cards.forEach(e=>e.isSelected=!1),this.interfaces.forEach(e=>e.isSelected=!1),this.selectedCard=null}showMessage(e){this.messages=[e],this.messageTimer=3}},p=class{constructor(e,t){i(this,"canvas");i(this,"ctx");i(this,"gameState");this.canvas=e,this.ctx=e.getContext("2d"),this.gameState=t}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);let e=getComputedStyle(this.canvas),t=(e.getPropertyValue("--cc-canvas-bg")||"#f8fafc").trim(),s=(e.getPropertyValue("--cc-progress")||"#64748b").trim(),n=(e.getPropertyValue("--cc-score")||"#059669").trim(),a=(e.getPropertyValue("--cc-message")||"#1e293b").trim(),o=(e.getPropertyValue("--cc-instruction")||"#64748b").trim();if(this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=s,this.ctx.font="bold 14px system-ui",this.ctx.textAlign="center",this.ctx.fillText(`Class ${this.gameState.currentClassIndex+1} of ${this.gameState.cards.length}`,this.canvas.width/2,30),this.ctx.fillStyle=n,this.ctx.font="bold 16px system-ui",this.ctx.textAlign="right",this.ctx.fillText(`Score: ${this.gameState.score}`,this.canvas.width-20,30),this.ctx.textAlign="left",this.gameState.cards.forEach(h=>h.draw(this.ctx)),this.gameState.interfaces.forEach(h=>h.draw(this.ctx)),this.gameState.gamePhase==="complete"){this.drawCompletionScreen();return}this.gameState.messageTimer>0&&(this.ctx.fillStyle=a,this.ctx.font="bold 16px system-ui",this.ctx.textAlign="center",this.ctx.fillText(this.gameState.messages[0],this.canvas.width/2,this.canvas.height-40)),this.ctx.fillStyle=o,this.ctx.font="14px system-ui",this.ctx.textAlign="center",this.ctx.fillText("Click the class, then select 1 matching interface!",this.canvas.width/2,this.canvas.height-20)}drawCompletionScreen(){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 32px system-ui",this.ctx.textAlign="center",this.ctx.fillText("\u{1F389} Congratulations!",this.canvas.width/2,this.canvas.height/2-60),this.ctx.font="bold 24px system-ui",this.ctx.fillText("You have mastered all C# classes!",this.canvas.width/2,this.canvas.height/2-20),this.ctx.font="bold 20px system-ui",this.ctx.fillText(`Final Score: ${this.gameState.score}`,this.canvas.width/2,this.canvas.height/2+20),this.ctx.fillStyle="#94a3b8",this.ctx.font="16px system-ui",this.ctx.fillText("Click anywhere to restart",this.canvas.width/2,this.canvas.height/2+60)}},b=class{constructor(e){i(this,"canvas");i(this,"gameState");i(this,"renderer");i(this,"isRunning",!1);try{let n=(e.clientWidth||800)-40,a=Math.max(320,Math.min(800,n)),o=Math.min(600,Math.max(360,a*.75));if(this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=o,this.canvas.style.maxWidth="100%",this.canvas.style.height="auto",e.appendChild(this.canvas),!this.canvas.getContext("2d"))throw new Error("Canvas 2D context not available");this.gameState=new S,this.gameState.setCanvasSize(this.canvas.width,this.canvas.height),this.renderer=new p(this.canvas,this.gameState),this.setupEventListeners(),this.start()}catch(t){console.error("Error in ClassBuilderGame constructor:",t),e.innerHTML='<div style="padding: 20px; text-align: center; color: #ef4444;">Game initialization failed. Please refresh the page.</div>'}}setupEventListeners(){try{if(this.canvas.addEventListener("click",e=>{let t=this.canvas.getBoundingClientRect(),s=e.clientX-t.left,n=e.clientY-t.top;this.gameState.handleClick(s,n)}),typeof ResizeObserver!="undefined")try{new ResizeObserver(()=>{this.handleResize()}).observe(this.canvas.parentElement)}catch(e){console.warn("ResizeObserver failed, using fallback:",e),window.addEventListener("resize",()=>this.handleResize())}else window.addEventListener("resize",()=>this.handleResize())}catch(e){console.error("Error setting up event listeners:",e)}}handleResize(){let s=(this.canvas.parentElement.clientWidth||this.canvas.width+40)-40,n=Math.max(320,Math.min(800,s)),a=Math.min(600,Math.max(360,n*.75));this.canvas.width=n,this.canvas.height=a,this.gameState.setCanvasSize(this.canvas.width,this.canvas.height),this.gameState.showCurrentClass()}start(){this.isRunning=!0,setTimeout(()=>{this.gameLoop()},100)}gameLoop(){if(this.isRunning)try{this.gameState.update(),this.renderer.render(),requestAnimationFrame(()=>this.gameLoop())}catch(e){console.error("Error in game loop:",e),this.stop()}}stop(){this.isRunning=!1}};(()=>{function r(){try{console.log("BootGame: Starting game initialization...");let e=document.querySelectorAll(".class-card-embed");console.log("BootGame: Found",e.length,"game elements"),e.forEach((t,s)=>{try{console.log(`BootGame: Initializing game ${s+1}...`);let n=t.getAttribute("data-title")||"C# Classes",a=(t.getAttribute("data-props")||"").split("|").map(c=>c.trim()).filter(Boolean),o=(t.getAttribute("data-ctors")||"").split("|").map(c=>c.trim()).filter(Boolean),h=(t.getAttribute("data-methods")||"").split("|").map(c=>c.trim()).filter(Boolean);console.log(`BootGame: Game ${s+1} data:`,{title:n,props:a,ctors:o,methods:h}),new b(t),console.log(`BootGame: Game ${s+1} created successfully`)}catch(n){console.error(`Error creating game ${s+1}:`,n),t.innerHTML='<div style="padding: 20px; text-align: center; color: #ef4444;">Game failed to load. Please refresh the page.</div>'}})}catch(e){console.error("Error in bootGame:",e)}}document.readyState==="loading"?(console.log("BootGame: DOM loading, waiting for DOMContentLoaded..."),document.addEventListener("DOMContentLoaded",r)):(console.log("BootGame: DOM ready, starting with delay..."),setTimeout(r,100))})();})();
